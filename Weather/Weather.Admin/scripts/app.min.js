var k;if(window||(this.window=this),window.console&&window.console.log||(window.console={log:function(){}}),window.XMLHttpRequest||(window.XMLHttpRequest=function(){for(var t=["Microsoft.XMLHTTP","Msxml2.XMLHTTP.3.0","Msxml2.XMLHTTP"],n=0,i=t.length;n<i;n++)try{return new ActiveXObject(t[n])}catch(r){}return null}),window.App={},window.Setting=App.Setting={Version:"0.4.0.41",NewLine:"\r\n",ServerUrl:"",VirtualPath:"/",Language:navigator.language?navigator.language:navigator.systemLanguage?navigator.systemLanguage:"en-US",ExceptionHandler:function(n,t,i){var e=!0,o=!0,s=null,f=0,r=window.top.Error.lastError,u;if(window.top.Error.lastError=null,r!=null&&(f=r.number,f===Error.errorNumbers.unconnected?(n=r.message,e=!1,o=!1):f===Error.errorNumbers.unauthorized?(u=Json.toJsonObject(r.description),n=u.Message,e=!1,o=!1):f===Error.errorNumbers.message?(u=Json.toJsonObject(r.description),n=u.Message,e=!1,o=!1):f===Error.errorNumbers.service?(u=Json.toJsonObject(r.description),n=u.Message,s=u.StackTrace?NewLine+u.StackTrace:"",e=!1):f===Error.errorNumbers.server?(n=r.message,s=r.description):(n=r.message,s=r.description)),e)try{SC.invokeAsync("App.Services.SystemService","ReportClientException",function(){},n,n+NewLine+t+", line "+i)}catch(h){}return App.Setting.ShowException(n,s,o?t:null,i,f),r&&r.number===Error.errorNumbers.unconnected&&App.Setting.ShowSignIn!=null&&App.Setting.ShowSignIn(),!0},ShowException:function(n,t,i,r){alert(n+(String.isNullOrEmpty(t)?"":this.NewLine+t)+(String.isNullOrEmpty(i)?"":this.NewLine+i+", line"+r))},ShowSignIn:null},parent!=null&&parent!=window&&typeof parent.Setting!="undefined")for(k in parent.Setting)App.Setting[k]=parent.Setting[k];if(typeof __setting=="object"){for(k in __setting)App.Setting[k]=__setting[k];delete __setting}window.NewLine=App.Setting.NewLine;window.VirtualPath=App.Setting.VirtualPath;window.onerror=App.Setting.ExceptionHandler;Object.isUndefined=function(n){return typeof n=="undefined"};Array.prototype.add=function(n){this[this.length]=n};Array.prototype.indexOf||(Array.prototype.indexOf=function(n,t){isNaN(t)&&(t=0);for(var i=t;i<this.length;i++)if(!Object.isUndefined(this[i])&&this[i]===n)return i;return-1});Array.prototype.contains=function(n){return this.indexOf(n,0)>=0};Array.prototype.where=function(n){var i=[],t;if(n==null)Array.copy(this,0,i);else for(t=0;t<this.length;t++)n(this[t])&&(i[i.length]=this[t]);return i};Array.prototype.select=function(n){for(var i=[],t=0;t<this.length;t++)i[t]=n(this[t]);return i};Array.prototype.first=function(n){var t=this.where(n);return t.length>0?t[0]:null};Array.copy=function(n,t,i,r,u){r=r?r:0;u=u?u:n.length-t;for(var f=0;f<u&&f<n.length-t;f++)i[f+r]=n[f+t]};Array.isNullOrEmpty=function(n){return n==null||n.length===0};Boolean.parse=function(n){return String.equals(n,"true",!0)?!0:String.equals(n,"false",!0)?!1:null};Error.New=function(n,t,i){var r=new Error;return r.message=n,r.description=t,i&&(r.number=i),window.top.Error.lastError=r,r};Error.Throw=function(n,t){throw Error.New(n,t);};Error.errorNumbers={server:9e3,service:9001,message:9002,unconnected:9003,unauthorized:9004};Date.TicksPerMillisecond=1e4;Date.TicksPerSecond=Date.TicksPerMillisecond*1e3;Date.TicksPerMinute=Date.TicksPerSecond*60;Date.TicksPerHour=Date.TicksPerMinute*60;Date.TicksPerDay=Date.TicksPerHour*24;Date.Ticks19700101=621355968000000000;Date.DaysToMonth365=[0,31,59,90,120,151,181,212,243,273,304,334,365];Date.DaysToMonth366=[0,31,60,91,121,152,182,213,244,274,305,335,366];Date.now=function(){return new Date};Date.today=function(){var n=new Date;return n.setTime(n.getTime()-(n.getTime()-n.getTimezoneOffset()*6e4)%864e5),n};Date.New=function(){return arguments.length===1?new Date(Date.ticksToTime(arguments[0])):arguments.length===3?new Date(Date.ticksToTime(Date.dateToTicks(arguments[0],arguments[1],arguments[2]),(new Date).getTimezoneOffsetTicks())):arguments.length===6?new Date(Date.ticksToTime(Date.dateToTicks(arguments[0],arguments[1],arguments[2])+Date.timeToTicks(arguments[3],arguments[4],arguments[5]),(new Date).getTimezoneOffsetTicks())):new Date};Date.isLeapYear=function(n){return n%4==0&&(n%100!=0||n%400==0)};Date.daysInYear=function(n){return Date.isLeapYear(n)?366:365};Date.daysInMonth=function(n,t){return t==2?Date.isLeapYear(n)?29:28:t<7?t%2==0?30:31:t==7?31:t%2==1?30:31};Date.dateToTicks=function(n,t,i){var u,r,f;if(n>=1&&n<=9999&&t>=1&&t<=12&&(u=Date.isLeapYear(n)?Date.DaysToMonth366:Date.DaysToMonth365,i>=1&&i<=u[t]-u[t-1]))return r=n-1,f=r*365+parseInt(r/4)-parseInt(r/100)+parseInt(r/400)+u[t-1]+i-1,f*Date.TicksPerDay;throw Error.New("BadYearMonthDay");};Date.timeToTicks=function(n,t,i){if(n>=0&&n<24&&t>=0&&t<60&&i>=0&&i<60)return n*Date.TicksPerHour+t*Date.TicksPerMinute+i*Date.TicksPerSecond;throw Error.New("BadHourMinuteSecond");};Date.ticksToTime=function(n,t){return t=t?t:0,parseInt((n+t-Date.Ticks19700101)/Date.TicksPerMillisecond)};Date.millisecondToTicks=function(n,t){return t=t?t:0,n*Date.TicksPerMillisecond+t+Date.Ticks19700101};Date.prototype.date=function(){return new Date(this.getTime()-(this.getTime()-this.getTimezoneOffset()*6e4)%864e5)};Date.prototype.addSeconds=function(n){return new Date(this.getTime()+n*1e3)};Date.prototype.addMinutes=function(n){return this.addSeconds(n*60)};Date.prototype.addHours=function(n){return this.addMinutes(60*n)};Date.prototype.addDays=function(n){return this.addHours(n*24)};Date.prototype.addMonths=function(n){var r=this.getFullYear(),t=this.getMonth()+1,u=this.getDate(),i=t-1+n,f;return i>=0?(t=i%12+1,r+=parseInt(i/12)):(t=12+(i+1)%12,r+=(i-11)/12),f=Date.daysInMonth(r,t),u=u>f?f:u,new Date(r,t-1,u,this.getHours(),this.getMinutes(),this.getSeconds())};Date.prototype.addYears=function(n){return new Date(this.getFullYear()+n,this.getMonth(),this.getDate(),this.getHours(),this.getMinutes(),this.getSeconds())};Date.prototype.dayOfYear=function(){return(this-new Date(this.getFullYear(),0,1))/864e5+1};Date.prototype.getTimezoneOffsetTicks=function(){return this.getTimezoneOffset()*Date.TicksPerMinute};Date.prototype.getTicks=function(){return Date.millisecondToTicks(this.getTime(),this.getTimezoneOffsetTicks())};Date.prototype.getUTCTicks=function(){return Date.millisecondToTicks(this.getTime())};Date.prototype.setTicks=function(n){this.setTime(Date.ticksToTime(n,this.getTimezoneOffsetTicks()))};Date.prototype.setUTCTicks=function(n){this.setTime(Date.ticksToTime(n))};Date._appendPreOrPostMatch=function(n,t){for(var u,f=0,i=!1,r=0,e=n.length;r<e;r++){u=n.charAt(r);switch(u){case"'":i?t.append("'"):f++;i=!1;break;case"\\":i&&t.append("\\");i=!i;break;default:t.append(u);i=!1}}return f};Date._expandFormat=function(n,t){t||(t="F");var i=t.length;if(i===1)switch(t){case"d":return n.ShortDatePattern;case"D":return n.LongDatePattern;case"t":return n.ShortTimePattern;case"T":return n.LongTimePattern;case"f":return n.LongDatePattern+" "+n.ShortTimePattern;case"F":return n.FullDateTimePattern;case"M":case"m":return n.MonthDayPattern;case"s":return n.SortableDateTimePattern;case"Y":case"y":return n.YearMonthPattern;default:throw Error.New(SR.get("FormatInvalidString"));}else i===2&&t.charAt(0)==="%"&&(t=t.charAt(1));return t};Date._expandYear=function(n,t){var r=new Date,u=Date._getEra(r),i;return t<100&&(i=Date._getEraYear(r,n,u),t+=i-i%100,t>n.Calendar.TwoDigitYearMax&&(t-=100)),t};Date._getEra=function(n,t){var r,u,i,f;if(!t)return 0;for(u=n.getTime(),i=0,f=t.length;i<f;i+=4)if(r=t[i+2],r===null||u>=r)return i;return 0};Date._getEraYear=function(n,t,i,r){var u=n.getFullYear();return!r&&t.eras&&(u-=t.eras[i+3]),u};Date._getParseRegExp=function(n,t){var r,c,l,e;if(n._parseRegExp){if(n._parseRegExp[t])return n._parseRegExp[t]}else n._parseRegExp={};r=Date._expandFormat(n,t);r=r.replace(/([\^\$\.\*\+\?\|\[\]\(\)\{\}])/g,"\\\\$1");for(var i=new App.StringBuilder("^"),o=[],f=0,s=0,h=Date._getTokenRegExp(),u;(u=h.exec(r))!==null;){if(c=r.slice(f,u.index),f=h.lastIndex,s+=Date._appendPreOrPostMatch(c,i),s%2==1){i.append(u[0]);continue}switch(u[0]){case"dddd":case"ddd":case"MMMM":case"MMM":case"gg":case"g":i.append("(\\D+)");break;case"tt":case"t":i.append("(\\D*)");break;case"yyyy":i.append("(\\d{4})");break;case"fff":i.append("(\\d{3})");break;case"ff":i.append("(\\d{2})");break;case"f":i.append("(\\d)");break;case"dd":case"d":case"MM":case"M":case"yy":case"y":case"HH":case"H":case"hh":case"h":case"mm":case"m":case"ss":case"s":i.append("(\\d\\d?)");break;case"zzz":i.append("([+-]?\\d\\d?:\\d{2})");break;case"zz":case"z":i.append("([+-]?\\d\\d?)");break;case"/":i.append("(\\"+n.DateSeparator+")");break;default:throw Error.New("Invalid date format pattern");}o.add(u[0])}return Date._appendPreOrPostMatch(r.slice(f),i),i.append("$"),l=i.toString().replace(/\s+/g,"\\s+"),e={regExp:l,groups:o},n._parseRegExp[t]=e,e};Date._getTokenRegExp=function(){return/\/|dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yy|y|hh|h|HH|H|mm|m|ss|s|tt|t|fff|ff|f|zzz|zz|z|gg|g/g};Date.parse=function(n,t){return Date.parseLocale(n,t)};Date.parseLocale=function(n){return Date._parse(n,App.CultureInfo.CurrentCulture,arguments)};Date.parseInvariant=function(n){return Date._parse(n,App.CultureInfo.InvariantCulture,arguments)};Date._parse=function(n,t,i){for(var u,e,o,s=!1,r=1,f=i.length;r<f;r++)if(e=i[r],e&&(s=!0,u=Date._parseExact(n,e,t),u))return u;if(!s)for(o=t._getDateTimeFormats(),r=0,f=o.length;r<f;r++)if(u=Date._parseExact(n,o[r],t),u)return u;return null};Date._parseExact=function(n,t,i){var y,ht,r,ut,tt,p,w,b,ct,u,k,v,ft;n=n.trim();var s=i.dateTimeFormat,et=Date._getParseRegExp(s,t),ot=new RegExp(et.regExp).exec(n);if(ot===null)return null;var st=et.groups,it=null,e=null,f=null,c=null,l=null,o=0,a,d=0,g=0,h=0,nt=null,rt=!1;for(y=0,ht=st.length;y<ht;y++)if(r=ot[y+1],r)switch(st[y]){case"dd":case"d":if(c=parseInt(r,10),c<1||c>31)return null;break;case"MMMM":if(f=i._getMonthIndex(r),f<0||f>11)return null;break;case"MMM":if(f=i._getAbbrMonthIndex(r),f<0||f>11)return null;break;case"M":case"MM":if(f=parseInt(r,10)-1,f<0||f>11)return null;break;case"y":case"yy":if(e=Date._expandYear(s,parseInt(r,10)),e<0||e>9999)return null;break;case"yyyy":if(e=parseInt(r,10),e<0||e>9999)return null;break;case"h":case"hh":if(o=parseInt(r,10),o===12&&(o=0),o<0||o>11)return null;break;case"H":case"HH":if(o=parseInt(r,10),o<0||o>23)return null;break;case"m":case"mm":if(d=parseInt(r,10),d<0||d>59)return null;break;case"s":case"ss":if(g=parseInt(r,10),g<0||g>59)return null;break;case"tt":case"t":if(ut=r.toUpperCase(),rt=ut===s.PMDesignator.toUpperCase(),!rt&&ut!==s.AMDesignator.toUpperCase())return null;break;case"f":if(h=parseInt(r,10)*100,h<0||h>999)return null;break;case"ff":if(h=parseInt(r,10)*10,h<0||h>999)return null;break;case"fff":if(h=parseInt(r,10),h<0||h>999)return null;break;case"dddd":if(l=i._getDayIndex(r),l<0||l>6)return null;break;case"ddd":if(l=i._getAbbrDayIndex(r),l<0||l>6)return null;break;case"zzz":if((tt=r.split(/:/),tt.length!==2)||(a=parseInt(tt[0],10),a<-12||a>13)||(p=parseInt(tt[1],10),p<0||p>59))return null;nt=a*60+(r.startsWith("-")?-p:p);break;case"z":case"zz":if(a=parseInt(r,10),a<-12||a>13)return null;nt=a*60;break;case"g":case"gg":if(w=r,!w||!s.eras)return null;for(w=w.toLowerCase().trim(),b=0,ct=s.eras.length;b<ct;b+=4)if(w===s.eras[b+1].toLowerCase()){it=b;break}if(it===null)return null}if(u=new Date,v=s.Calendar.convert,v&&(k=v.fromGregorian(u)),v||(k=[u.getFullYear(),u.getMonth(),u.getDate()]),e===null?e=k[0]:s.eras&&(e+=s.eras[(it||0)+3]),f===null&&(f=k[1]),c===null&&(c=k[2]),v){if(u=v.toGregorian(e,f,c),u===null)return null}else if((u.setFullYear(e,f,c),u.getDate()!==c)||l!==null&&u.getDay()!==l)return null;return rt&&o<12&&(o+=12),u.setHours(o,d,g,h),nt!==null&&(ft=u.getMinutes()-(nt+u.getTimezoneOffset()),u.setHours(u.getHours()+parseInt(ft/60,10),ft%60)),u};Date.prototype.toString=function(n,t){return String.isNullOrEmpty(n)&&(n=(this.getTime()-this.getTimezoneOffset()*6e4)%864e5==0?"yyyy-MM-dd":"yyyy-MM-dd HH:mm:ss"),this._toFormattedString(n,t?t:App.CultureInfo.CurrentCulture)};Date.prototype.format=function(n){return this._toFormattedString(n,App.CultureInfo.InvariantCulture)};Date.prototype.localeFormat=function(n){return this._toFormattedString(n,App.CultureInfo.CurrentCulture)};Date.prototype._toFormattedString=function(n,t){function f(n){return n<10?"0"+n:n.toString()}function y(n){return n<10?"00"+n:n<100?"0"+n:n.toString()}function nt(n){return n<10?"000"+n:n<100?"00"+n:n<1e3?"0"+n:n.toString()}function g(){return s||k?s:(s=d.test(n),k=!0,s)}var r=t.dateTimeFormat,a=r.Calendar.convert,v,b,h,c,i,u,s,k,d,p,w,e;if(!n||!n.length||n==="i")return t&&t.name.length?a?this._toFormattedString(r.FullDateTimePattern,t):(v=new Date(this.getTime()),b=Date._getEra(this,r.eras),v.setFullYear(Date._getEraYear(this,r,b)),v.toLocaleString()):this.toString();for(h=r.eras,c=n==="s",n=Date._expandFormat(r,n),i=new App.StringBuilder,d=/([^d]|^)(d|dd)([^d]|$)/g,p=0,w=Date._getTokenRegExp(),!c&&a&&(e=a.fromGregorian(this));;){var tt=w.lastIndex,l=w.exec(n),it=n.slice(tt,l?l.index:n.length);if(p+=Date._appendPreOrPostMatch(it,i),!l)break;if(p%2==1){i.append(l[0]);continue}function o(n,t){if(e)return e[t];switch(t){case 0:return n.getFullYear();case 1:return n.getMonth();case 2:return n.getDate()}}switch(l[0]){case"dddd":i.append(r.DayNames[this.getDay()]);break;case"ddd":i.append(r.AbbreviatedDayNames[this.getDay()]);break;case"dd":s=!0;i.append(f(o(this,2)));break;case"d":s=!0;i.append(o(this,2));break;case"MMMM":i.append(r.MonthGenitiveNames&&g()?r.MonthGenitiveNames[o(this,1)]:r.MonthNames[o(this,1)]);break;case"MMM":i.append(r.AbbreviatedMonthGenitiveNames&&g()?r.AbbreviatedMonthGenitiveNames[o(this,1)]:r.AbbreviatedMonthNames[o(this,1)]);break;case"MM":i.append(f(o(this,1)+1));break;case"M":i.append(o(this,1)+1);break;case"yyyy":i.append(nt(e?e[0]:Date._getEraYear(this,r,Date._getEra(this,h),c)));break;case"yy":i.append(f((e?e[0]:Date._getEraYear(this,r,Date._getEra(this,h),c))%100));break;case"y":i.append((e?e[0]:Date._getEraYear(this,r,Date._getEra(this,h),c))%100);break;case"hh":u=this.getHours()%12;u===0&&(u=12);i.append(f(u));break;case"h":u=this.getHours()%12;u===0&&(u=12);i.append(u);break;case"HH":i.append(f(this.getHours()));break;case"H":i.append(this.getHours());break;case"mm":i.append(f(this.getMinutes()));break;case"m":i.append(this.getMinutes());break;case"ss":i.append(f(this.getSeconds()));break;case"s":i.append(this.getSeconds());break;case"tt":i.append(this.getHours()<12?r.AMDesignator:r.PMDesignator);break;case"t":i.append((this.getHours()<12?r.AMDesignator:r.PMDesignator).charAt(0));break;case"f":i.append(y(this.getMilliseconds()).charAt(0));break;case"ff":i.append(y(this.getMilliseconds()).substr(0,2));break;case"fff":i.append(y(this.getMilliseconds()));break;case"z":u=this.getTimezoneOffset()/60;i.append((u<=0?"+":"-")+Math.floor(Math.abs(u)));break;case"zz":u=this.getTimezoneOffset()/60;i.append((u<=0?"+":"-")+f(Math.floor(Math.abs(u))));break;case"zzz":u=this.getTimezoneOffset()/60;i.append((u<=0?"+":"-")+f(Math.floor(Math.abs(u)))+":"+f(Math.abs(this.getTimezoneOffset()%60)));break;case"g":case"gg":r.eras&&i.append(r.eras[Date._getEra(this,h)+1]);break;case"/":i.append(r.DateSeparator);break;default:throw Error.New("Invalid date format pattern");}}return i.toString()};window.TimeSpan=function(){this.ticks=0;arguments.length===1&&(this.ticks=arguments[0]);arguments.length===3&&(this.ticks=(arguments[0]*3600+arguments[1]*60+arguments[2])*Date.TicksPerSecond);arguments.length===4&&(this.ticks=(arguments[0]*86400+arguments[1]*3600+arguments[2]*60+arguments[3])*Date.TicksPerSecond);arguments.length===5&&(this.ticks=(arguments[0]*86400+arguments[1]*3600+arguments[2]*60+arguments[3])*Date.TicksPerSecond+arguments[4]*Date.TicksPerMillisecond)};TimeSpan.Zero=new TimeSpan(0);TimeSpan.prototype={getTicks:function(){return this.ticks},getDays:function(){return Math.floor(this.ticks/Date.TicksPerDay)},getHours:function(){return Math.floor(this.ticks/Date.TicksPerHour%24)},getMinutes:function(){return Math.floor(this.ticks/Date.TicksPerMinute%60)},getSeconds:function(){return Math.floor(this.ticks/Date.TicksPerSecond%60)},getMilliseconds:function(){return Math.floor(this.ticks/Date.TicksPerMillisecond%1e3)},getTotalDays:function(){return this.ticks/Date.TicksPerDay},getTotalHours:function(){return this.ticks/Date.TicksPerHour},getTotalMinutes:function(){return this.ticks/Date.TicksPerMinute},getTotalSeconds:function(){return this.ticks/Date.TicksPerSecond},getTotalMilliseconds:function(){return this.ticks/Date.TicksPerMillisecond},toString:function(){var n=this.ticks<0?"-":"",t;return this.getDays()>0&&(n+=this.getDays().toString()+" "),n+=this.getHours().toString()+":",n+=this.getMinutes().toString()+":",n+=this.getSeconds().toString(),this.ticks%Date.TicksPerSecond>0&&(t=(this.ticks%Date.TicksPerSecond/Date.TicksPerSecond).toString(),n+=t.substr(1,t.length-1)),n}};Function.Empty=function(){};Number.prototype.In=function(){for(var n=0;n<arguments.length;n++)if(this===arguments[n])return!0;return!1};Number.MaxInt16=32767;Number.MinInt16=-32768;Number.MaxInt32=2147483647;Number.MinInt32=-2147483648;Number.MaxInt64=9223372036854775807;Number.MinInt64=-9223372036854775808;Number.parse=function(n,t){var l,f,e,r,a,v,y,h,c;if(n=n.trim(),t==null&&(t=App.CultureInfo.CurrentCulture),n.match(/^[+-]?infinity$/i))return parseFloat(n);if(n.match(/^0x[a-f0-9]+$/i))return parseInt(n);var i=t.numberFormat,o=Number._parseNumberNegativePattern(n,i,i.NumberNegativePattern),s=o[0],u=o[1];return(s===""&&i.NumberNegativePattern!==1&&(o=Number._parseNumberNegativePattern(n,i,1),s=o[0],u=o[1]),s===""&&(s="+"),e=u.indexOf("e"),e<0&&(e=u.indexOf("E")),e<0?(f=u,l=null):(f=u.substr(0,e),l=u.substr(e+1)),v=f.indexOf(i.NumberDecimalSeparator),v<0?(r=f,a=null):(r=f.substr(0,v),a=f.substr(v+i.NumberDecimalSeparator.length)),r=r.split(i.NumberGroupSeparator).join(""),y=i.NumberGroupSeparator.replace(/\u00A0/g," "),i.NumberGroupSeparator!==y&&(r=r.split(y).join("")),h=s+r,a!==null&&(h+="."+a),l!==null&&(c=Number._parseNumberNegativePattern(l,i,1),c[0]===""&&(c[0]="+"),h+="e"+c[0]+c[1]),h.match(/^[+-]?\d*\.?\d*(e[+-]?\d+)?$/))?parseFloat(h):Number.NaN};Number._parseNumberNegativePattern=function(n,t,i){var r=t.NegativeSign,u=t.PositiveSign;switch(i){case 4:r=" "+r;u=" "+u;case 3:if(n.endsWith(r))return["-",n.substr(0,n.length-r.length)];if(n.endsWith(u))return["+",n.substr(0,n.length-u.length)];break;case 2:r+=" ";u+=" ";case 1:if(n.startsWith(r))return["-",n.substr(r.length)];if(n.startsWith(u))return["+",n.substr(u.length)];break;case 0:if(n.startsWith("(")&&n.endsWith(")"))return["-",n.substr(1,n.length-2)];break;default:throw Error.New("fail.");}return["",n]};Number.parseInt16=function(n,t){return Number._parseInteger(n,t,Number.MinInt16,Number.MaxInt16)};Number.parseInt32=function(n,t){return Number._parseInteger(n,t,Number.MinInt32,Number.MaxInt32)};Number.parseInt64=function(n,t){return Number._parseInteger(n,t,Number.MinInt64,Number.MaxInt64)};Number.parseUInt16=function(n,t){return Number._parseInteger(n,t,0,Number.MaxInt16)};Number.parseUInt32=function(n,t){return Number._parseInteger(n,t,0,Number.MaxInt32)};Number.parseUInt64=function(n,t){return Number._parseInteger(n,t,0,Number.MaxInt64)};Number.parseFloat=function(n,t){var i=Number.parse(n,t);return!isNaN(i)&&i!=null?i:null};Number.parseDecimal=function(n,t){var i=Number.parse(n,t);return!isNaN(i)&&i!=null?i:null};Number.parseDouble=function(n,t){var i=Number.parse(n,t);return!isNaN(i)&&i!=null?i:null};Number._parseInteger=function(n,t,i,r){var u=Number.parse(n,t);return!isNaN(u)&&u!=null?u%1==0&&u<r&&u>i?u:null:null};Number.prototype.format=function(n,t){function s(n,t,i){for(var r=n.length;r<t;r++)n=i?"0"+n:n+"0";return n}function c(n,t,i,r,u){var a=i[0],v=1,p=Math.pow(10,t),y=Math.round(n*p)/p,h,l;isFinite(y)||(y=n);n=y;var e=n.toString(),f="",o,c=e.split(/e/i);for(e=c[0],o=c.length>1?parseInt(c[1]):0,c=e.split("."),e=c[0],f=c.length>1?c[1]:"",o>0?(f=s(f,o,!1),e+=f.slice(0,o),f=f.substr(o)):o<0&&(o=-o,e=s(e,o+1,!0),f=e.slice(-o,e.length)+f,e=e.slice(0,-o)),t>0?(f=f.length>t?f.slice(0,t):s(f,t,!1),f=u+f):f="",h=e.length-1,l="";h>=0;){if(a===0||a>h)return l.length>0?e.slice(0,h+1)+r+l+f:e.slice(0,h+1)+f;l=l.length>0?e.slice(h-a+1,h+1)+r+l:e.slice(h-a+1,h+1);h-=a;v<i.length&&(a=i[v],v++)}return e.slice(0,h+1)+r+l+f}var i,u,r,f,h,e,l,o;if(t||(t=App.CultureInfo.CurrentCulture),!n||n.length===0||n==="i")return t&&t.name.length>0?this.toLocaleString():this.toString();if(n.indexOf("#")>=0||n.indexOf("0")>=0)return this._customFormat(n,t);i=t.numberFormat;u=Math.abs(this);n||(n="D");r=-1;n.length>1&&(r=parseInt(n.slice(1),10));switch(n.charAt(0)){case"d":case"D":f="n";r!==-1&&(u=s(""+u,r,!0));this<0&&(u=-u);break;case"c":case"C":f=this<0?["($n)","-$n","$-n","$n-","(n$)","-n$","n-$","n$-","-n $","-$ n","n $-","$ n-","$ -n","n- $","($ n)","(n $)"][i.CurrencyNegativePattern]:["$n","n$","$ n","n $"][i.CurrencyPositivePattern];r===-1&&(r=i.CurrencyDecimalDigits);u=c(Math.abs(this),r,i.CurrencyGroupSizes,i.CurrencyGroupSeparator,i.CurrencyDecimalSeparator);break;case"n":case"N":f=this<0?["(n)","-n","- n","n-","n -"][i.NumberNegativePattern]:"n";r===-1&&(r=i.NumberDecimalDigits);u=c(Math.abs(this),r,i.NumberGroupSizes,i.NumberGroupSeparator,i.NumberDecimalSeparator);break;case"p":case"P":f=this<0?["-n %","-n%","-%n"][i.PercentNegativePattern]:["n %","n%","%n"][i.PercentPositivePattern];r===-1&&(r=i.PercentDecimalDigits);u=c(Math.abs(this)*100,r,i.PercentGroupSizes,i.PercentGroupSeparator,i.PercentDecimalSeparator);break;default:throw Error.New(SR.get("BadFormatSpecifier"));}for(h=/n|\$|-|%/g,e="";;){if(l=h.lastIndex,o=h.exec(f),e+=f.slice(l,o?o.index:f.length),!o)break;switch(o[0]){case"n":e+=u;break;case"$":e+=i.CurrencySymbol;break;case"-":/[1-9]/.test(u)&&(e+=i.NegativeSign);break;case"%":e+=i.PercentSymbol;break;default:throw Error.New("Invalid number format pattern");}}return e};Number.prototype._customFormat=function(format,cultureInfo){function _format(n,t,i){for(var r,u,o=n.length>=t.length?n.length:t.length,s=n.split(""),h=t.split(""),c=!0,f="",e=0;e<o;e++)r=h[h.length-o+e],u=s[s.length-o+e],i==0?c?(r&&u&&(r!="0"||u=="0")||r&&r!="0"&&!u||u&&u=="0"&&!r)&&(f+=r?r:"0",c=!1):f+=r?r:"0":u&&(u=="0"||u=="#"&&r)&&(f+=r?r:"0");return f}var ds=cultureInfo.numberFormat.NumberDecimalSeparator,gs=cultureInfo.numberFormat.NumberGroupSeparator,pattern=format.match(/[0#,.]{1,}/g)[0],numberString=this.toString(),patterns=pattern.split(ds),numberStrings=numberString.split(ds),z=patterns[0].indexOf(gs)==-1?-1:patterns[0].length-patterns[0].indexOf(gs),num1=_format(patterns[0].replace(",",""),numberStrings[0],0),num2=_format(patterns[1]?patterns[1].split("").reverse().join(""):"",numberStrings[1]?numberStrings[1].split("").reverse().join(""):"",1),reCat,arrdata,w;return num1=num1.split("").reverse().join(""),reCat=eval("/[0-9]{"+(z-1)+","+(z-1)+"}/g"),arrdata=z>-1?num1.match(reCat):undefined,arrdata&&arrdata.length>0&&(w=num1.replace(arrdata.join(""),""),num1=arrdata.join(gs)+(w==""?"":gs)+w),num1=num1.split("").reverse().join(""),format.replace(pattern,(num1==""?"0":num1)+(num2!=""?ds+num2.split("").reverse().join(""):""))};Number._toStringFunction=Number.prototype.toString;Number.prototype.toString=function(n,t){return String.isNullOrEmpty(n)||typeof n!="string"?Number._toStringFunction.call(this):this.format(n,t)};String.prototype.endsWith=function(n,t){return String.equals(this.substr(this.length-n.length),n,t)};String.prototype.startsWith=function(n,t){return String.equals(this.substr(0,n.length),n,t)};String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")});String.prototype.trimEnd=function(){return this.replace(/\s+$/,"")};String.prototype.trimStart=function(){return this.replace(/^\s+/,"")};String.prototype.padLeft=function(n,t){var i,r;for(t==null&&(t=" "),i=new String(this),r=0;r<n-this.length;r++)i=t+i;return i};String.prototype.padRight=function(n,t){var i,r;for(t==null&&(t=" "),i=new String(this),r=0;r<n-this.length;r++)i+=t;return i};String.prototype.In=function(){for(var n=0;n<arguments.length;n++)if(this===arguments[n])return!0;return!1};String.isNullOrEmpty=function(n){return n==null||n.length===0};String.equals=function(n,t,i){return n===null?t===null:t===null?!1:(i=i==null?!1:i,i?n.toLowerCase()===t.toLowerCase():n===t)};Object.isUndefined(String.format)&&(String.format=function(n){for(var f,i,h,r,u="",c=arguments,t=0;;){if(f=n.indexOf("{",t),i=n.indexOf("}",t),f<0&&i<0){u+=n.slice(t);break}if(i>0&&(i<f||f<0)){if(n.charAt(i+1)!=="}")throw Error.New(SR.get("StringFormatBraceMismatch"));u+=n.slice(t,i+1);t=i+2;continue}if(u+=n.slice(t,f),t=f+1,n.charAt(t)==="{"){u+="{";t++;continue}if(i<0)throw Error.New(SR.get("StringFormatBraceMismatch"));var e=n.substring(t,i),o=e.indexOf(":"),s=parseInt(o<0?e:e.substring(0,o),10)+1;if(isNaN(s))throw Error.New(SR.get("StringFormatInvalid"));h=o<0?"":e.substring(o+1);r=c[s];(Object.isUndefined(r)||r===null)&&(r="");u+=r.toFormattedString?r.toFormattedString(h):r.toString();t=i+1}return u});window.setCookie=function(n,t,i,r,u,f){document.cookie=n+"="+t+(i==null?"":"; expires="+i.toUTCString())+(r==null?"":"; domain="+r)+(u==null?"; path=/":"; path="+u)+(f?"secure":"")};window.getCookie=function(n){var t=document.cookie,i=t.indexOf(n+"="),r,u;return(i>0&&(n=" "+n,i=t.indexOf(n+"=")),i>=0)?(r=i+n.length+1,u=t.indexOf(";",r),u<r&&(u=t.length),unescape(t.substring(r,u))):""};window.deleteCookie=function(n,t,i){var r=new Date;r.setTime(r.getTime()-6e4);setCookie(n,"Delete Cookie",r,t,i,!1)};window.getQueryString=function(n){var t=window.location.search,i,r;return t.indexOf("?"+n+"=")!=-1||t.indexOf("&"+n+"=")!=-1?(i=(t.indexOf("?"+n+"=")>=0?t.indexOf("?"+n+"="):t.indexOf("&"+n+"="))+n.length+2,r=t.indexOf("&",i),r==-1?t.substring(i):t.substring(i,r)):null};window.Json={_charsToEscapeRegExs:[],_charsToEscape:[],_escapeChars:{},_escapeRegEx:new RegExp('["\\\\\\x00-\\x1F\'"]',"i"),_escapeRegExGlobal:new RegExp('["\\\\\\x00-\\x1F\'"]',"g"),_init:function(){var i=["\\u0000","\\u0001","\\u0002","\\u0003","\\u0004","\\u0005","\\u0006","\\u0007","\\b","\\t","\\n","\\u000b","\\f","\\r","\\u000e","\\u000f","\\u0010","\\u0011","\\u0012","\\u0013","\\u0014","\\u0015","\\u0016","\\u0017","\\u0018","\\u0019","\\u001a","\\u001b","\\u001c","\\u001d","\\u001e","\\u001f"],n,t;for(Json._charsToEscape[0]="\\",Json._charsToEscapeRegExs["\\"]=new RegExp("\\\\","g"),Json._escapeChars["\\"]="\\\\",Json._charsToEscape[1]="'",Json._charsToEscapeRegExs["'"]=new RegExp("\\'","g"),Json._escapeChars["'"]="\\'",Json._charsToEscape[2]='"',Json._charsToEscapeRegExs['"']=new RegExp('"',"g"),Json._escapeChars['"']='\\"',n=0;n<32;n++)t=String.fromCharCode(n),Json._charsToEscape[n+3]=t,Json._charsToEscapeRegExs[t]=new RegExp(t,"g"),Json._escapeChars[t]=i[n]},definiteType:function(n,t){return n!=null&&n.constructor===Json._definiteType?n:new Json._definiteType(n,t)},toJsonString:function(n,t,i){var f,e,r,o,u;if(n==null)return"null";switch(n.constructor){case Array:for(f=n.length>0&&n[0]instanceof Object?!0:!1,r="["+(f?NewLine:""),t=t?t:"",e=0;e<n.length;e++)e>0&&(r+=", "+(f?NewLine:"")),r+=(f?t+"\t":"")+Json.toJsonString(n[e],t+"\t",i);return r+((f?NewLine+t:"")+"]");case Boolean:return n?"true":"false";case Date:return n.getUTCTicks().toString();case Number:return n.toString();case String:return i=i?i:'"',i+Json.encode(n)+i;case Json._definiteType:return t=t?t:"",t+n.type+" "+Json.toJsonString(n.value,t+"\t",i);default:if(n.toJsonString)return n.toJsonString(t,i);r="{"+NewLine;o=!0;t=t?t:"";for(u in n)typeof n[u]=="function"||u.constructor==String&&u.startsWith("__")||(o?o=!1:r+=","+NewLine,r+=t+'\t"'+u+'" : '+Json.toJsonString(n[u],t+"\t",i));return r+(NewLine+t+"}")}},toJsonObject:function(s){return s!=null&&s.constructor===String?window.JSON?JSON.parse(s):eval("("+s+")"):s},encode:function(n){var t,i;if(Json._escapeRegEx.test(n))if(Json._charsToEscape.length===0&&Json._init(),n.length<128)n=n.replace(Json._escapeRegExGlobal,function(n){return Json._escapeChars[n]});else for(t=0;t<35;t++)i=Json._charsToEscape[t],n.indexOf(i)!==-1&&(n=n.replace(Json._charsToEscapeRegExs[i],Json._escapeChars[i]));return n},_definiteType:function(n,t){this.value=n;this.type=t==null?Json._getType(n):t.constructor==String?t:t.toString()},_getType:function(n){if(n==null)return"object";switch(n.constructor){case Array:return n.length>0?Json._getType(n[0])+"[]":"object[]";case Boolean:return"bool";case Date:return"System.DateTime";case Number:return n%1==0?n>Number.MaxInt32?n>Number.MaxInt64?"decimal":"long":"int":"decimal";case String:return"string";default:return n.constructor.getDataType?n.constructor.getDataType().FullName:"object"}}};App.StringBuilder=function(n){this._parts=typeof n!="undefined"&&n!==null&&n!==""?[n.toString()]:[];this._value={};this._len=0};App.StringBuilder.prototype={append:function(n){this._parts[this._parts.length]=n},appendLine:function(n){this._parts[this._parts.length]=typeof n=="undefined"||n===null||n===""?"\r\n":n+"\r\n"},clear:function(){this._parts=[];this._value={};this._len=0},isEmpty:function(){return this._parts.length===0?!0:this.toString()===""},toString:function(n){var t,r,i;if(n=n||"",t=this._parts,this._len!==t.length&&(this._value={},this._len=t.length),r=this._value,typeof r[n]=="undefined"){if(n!=="")for(i=0;i<t.length;)typeof t[i]=="undefined"||t[i]===""||t[i]===null?t.splice(i,1):i++;r[n]=this._parts.join(n)}return r[n]}};App.CultureInfo=function(n,t,i){this.name=n;this.numberFormat=t;this.dateTimeFormat=i;App.CultureInfo.cultures.first(function(t){return t.name===n})==null&&App.CultureInfo.cultures.add(this)};App.CultureInfo.cultures=[];App.CultureInfo.getCulture=function(n){var i=App.CultureInfo.cultures.first(function(t){return t.name===n}),t;return i!=null?i:(t=SR.getParentCulture(n),t===null?null:App.CultureInfo.getCulture(t))};App.CultureInfo.prototype={_getDateTimeFormats:function(){if(!this._dateTimeFormats){var n=this.dateTimeFormat;this._dateTimeFormats=[n.MonthDayPattern,n.YearMonthPattern,n.ShortDatePattern,n.ShortTimePattern,n.LongDatePattern,n.LongTimePattern,n.FullDateTimePattern,n.ShortDatePattern+" "+n.ShortTimePattern,n.ShortDatePattern+" "+n.LongTimePattern,n.RFC1123Pattern,n.SortableDateTimePattern,n.UniversalSortableDateTimePattern]}return this._dateTimeFormats},_getIndex:function(n,t,i){var u=this._toUpper(n),r=t.indexOf(u);return r===-1&&(r=i.indexOf(u)),r},_getMonthIndex:function(n){return this._upperMonths||(this._upperMonths=this._toUpperArray(this.dateTimeFormat.MonthNames),this._upperMonthsGenitive=this._toUpperArray(this.dateTimeFormat.MonthGenitiveNames)),this._getIndex(n,this._upperMonths,this._upperMonthsGenitive)},_getAbbrMonthIndex:function(n){return this._upperAbbrMonths||(this._upperAbbrMonths=this._toUpperArray(this.dateTimeFormat.AbbreviatedMonthNames),this._upperAbbrMonthsGenitive=this._toUpperArray(this.dateTimeFormat.AbbreviatedMonthGenitiveNames)),this._getIndex(n,this._upperAbbrMonths,this._upperAbbrMonthsGenitive)},_getDayIndex:function(n){return this._upperDays||(this._upperDays=this._toUpperArray(this.dateTimeFormat.DayNames)),this._upperDays.indexOf(this._toUpper(n))},_getAbbrDayIndex:function(n){return this._upperAbbrDays||(this._upperAbbrDays=this._toUpperArray(this.dateTimeFormat.AbbreviatedDayNames)),this._upperAbbrDays.indexOf(this._toUpper(n))},_toUpperArray:function(n){for(var i=[],t=0,r=n.length;t<r;t++)i[t]=this._toUpper(n[t]);return i},_toUpper:function(n){return n.split(" ").join(" ").toUpperCase()},constructor:App.CultureInfo};App.CultureInfo._parse=function(n){var t=n.dateTimeFormat;return t&&!t.eras&&(t.eras=n.eras),new App.CultureInfo(n.name,n.numberFormat,t)};App.CultureInfo.InvariantCulture=App.CultureInfo._parse({name:"",numberFormat:{CurrencyDecimalDigits:2,CurrencyDecimalSeparator:".",IsReadOnly:!0,CurrencyGroupSizes:[3],NumberGroupSizes:[3],PercentGroupSizes:[3],CurrencyGroupSeparator:",",CurrencySymbol:"¤",NaNSymbol:"NaN",CurrencyNegativePattern:0,NumberNegativePattern:1,PercentPositivePattern:0,PercentNegativePattern:0,NegativeInfinitySymbol:"-Infinity",NegativeSign:"-",NumberDecimalDigits:2,NumberDecimalSeparator:".",NumberGroupSeparator:",",CurrencyPositivePattern:0,PositiveInfinitySymbol:"Infinity",PositiveSign:"+",PercentDecimalDigits:2,PercentDecimalSeparator:".",PercentGroupSeparator:",",PercentSymbol:"%",PerMilleSymbol:"‰",NativeDigits:["0","1","2","3","4","5","6","7","8","9"],DigitSubstitution:1},dateTimeFormat:{AMDesignator:"AM",Calendar:{MinSupportedDateTime:"@-62135568000000@",MaxSupportedDateTime:"@253402300799999@",AlgorithmType:1,CalendarType:1,Eras:[1],TwoDigitYearMax:2029,IsReadOnly:!0},DateSeparator:"/",FirstDayOfWeek:0,CalendarWeekRule:0,FullDateTimePattern:"dddd, dd MMMM yyyy HH:mm:ss",LongDatePattern:"dddd, dd MMMM yyyy",LongTimePattern:"HH:mm:ss",MonthDayPattern:"MMMM dd",PMDesignator:"PM",RFC1123Pattern:"ddd, dd MMM yyyy HH':'mm':'ss 'GMT'",ShortDatePattern:"MM/dd/yyyy",ShortTimePattern:"HH:mm",SortableDateTimePattern:"yyyy'-'MM'-'dd'T'HH':'mm':'ss",TimeSeparator:":",UniversalSortableDateTimePattern:"yyyy'-'MM'-'dd HH':'mm':'ss'Z'",YearMonthPattern:"yyyy MMMM",AbbreviatedDayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],ShortestDayNames:["Su","Mo","Tu","We","Th","Fr","Sa"],DayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],AbbreviatedMonthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",""],MonthNames:["January","February","March","April","May","June","July","August","September","October","November","December",""],IsReadOnly:!0,NativeCalendarName:"Gregorian Calendar",AbbreviatedMonthGenitiveNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",""],MonthGenitiveNames:["January","February","March","April","May","June","July","August","September","October","November","December",""]},eras:[1,"A.D.",null,0]});App.CultureInfo.CurrentCulture=App.CultureInfo._parse({name:"zh-CN",numberFormat:{CurrencyDecimalDigits:2,CurrencyDecimalSeparator:".",IsReadOnly:!0,CurrencyGroupSizes:[3],NumberGroupSizes:[3],PercentGroupSizes:[3],CurrencyGroupSeparator:",",CurrencySymbol:"￥",NaNSymbol:"非数字",CurrencyNegativePattern:2,NumberNegativePattern:1,PercentPositivePattern:1,PercentNegativePattern:1,NegativeInfinitySymbol:"负无穷大",NegativeSign:"-",NumberDecimalDigits:2,NumberDecimalSeparator:".",NumberGroupSeparator:",",CurrencyPositivePattern:0,PositiveInfinitySymbol:"正无穷大",PositiveSign:"+",PercentDecimalDigits:2,PercentDecimalSeparator:".",PercentGroupSeparator:",",PercentSymbol:"%",PerMilleSymbol:"‰",NativeDigits:["0","1","2","3","4","5","6","7","8","9"],DigitSubstitution:1},dateTimeFormat:{AMDesignator:"上午",Calendar:{MinSupportedDateTime:0,MaxSupportedDateTime:3155378687999999999,AlgorithmType:1,CalendarType:1,Eras:[1],TwoDigitYearMax:2029,IsReadOnly:!0},DateSeparator:"-",FirstDayOfWeek:0,CalendarWeekRule:0,FullDateTimePattern:"yyyy'年'M'月'd'日' HH:mm:ss",LongDatePattern:"yyyy'年'M'月'd'日'",LongTimePattern:"HH:mm:ss",MonthDayPattern:"M'月'd'日'",PMDesignator:"下午",RFC1123Pattern:"ddd, dd MMM yyyy HH':'mm':'ss 'GMT'",ShortDatePattern:"yyyy-MM-dd",ShortTimePattern:"HH:mm",SortableDateTimePattern:"yyyy'-'MM'-'dd'T'HH':'mm':'ss",TimeSeparator:":",UniversalSortableDateTimePattern:"yyyy'-'MM'-'dd HH':'mm':'ss'Z'",YearMonthPattern:"yyyy'年'M'月'",AbbreviatedDayNames:["周日","周一","周二","周三","周四","周五","周六"],ShortestDayNames:["日","一","二","三","四","五","六"],DayNames:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],AbbreviatedMonthNames:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月",""],MonthNames:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月",""],IsReadOnly:!0,NativeCalendarName:"公历",AbbreviatedMonthGenitiveNames:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月",""],MonthGenitiveNames:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月",""]}});App.CultureInfo._parse({name:"en-US",numberFormat:{CurrencyDecimalDigits:2,CurrencyDecimalSeparator:".",IsReadOnly:!1,CurrencyGroupSizes:[3],NumberGroupSizes:[3],PercentGroupSizes:[3],CurrencyGroupSeparator:",",CurrencySymbol:"$",NaNSymbol:"NaN",CurrencyNegativePattern:0,NumberNegativePattern:1,PercentPositivePattern:0,PercentNegativePattern:0,NegativeInfinitySymbol:"-Infinity",NegativeSign:"-",NumberDecimalDigits:2,NumberDecimalSeparator:".",NumberGroupSeparator:",",CurrencyPositivePattern:0,PositiveInfinitySymbol:"Infinity",PositiveSign:"+",PercentDecimalDigits:2,PercentDecimalSeparator:".",PercentGroupSeparator:",",PercentSymbol:"%",PerMilleSymbol:"‰",NativeDigits:["0","1","2","3","4","5","6","7","8","9"],DigitSubstitution:1},dateTimeFormat:{AMDesignator:"AM",Calendar:{MinSupportedDateTime:"@-62135568000000@",MaxSupportedDateTime:"@253402300799999@",AlgorithmType:1,CalendarType:1,Eras:[1],TwoDigitYearMax:2029,IsReadOnly:!1},DateSeparator:"/",FirstDayOfWeek:0,CalendarWeekRule:0,FullDateTimePattern:"dddd, MMMM dd, yyyy h:mm:ss tt",LongDatePattern:"dddd, MMMM dd, yyyy",LongTimePattern:"h:mm:ss tt",MonthDayPattern:"MMMM dd",PMDesignator:"PM",RFC1123Pattern:"ddd, dd MMM yyyy HH':'mm':'ss 'GMT'",ShortDatePattern:"M/d/yyyy",ShortTimePattern:"h:mm tt",SortableDateTimePattern:"yyyy'-'MM'-'dd'T'HH':'mm':'ss",TimeSeparator:":",UniversalSortableDateTimePattern:"yyyy'-'MM'-'dd HH':'mm':'ss'Z'",YearMonthPattern:"MMMM, yyyy",AbbreviatedDayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],ShortestDayNames:["Su","Mo","Tu","We","Th","Fr","Sa"],DayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],AbbreviatedMonthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",""],MonthNames:["January","February","March","April","May","June","July","August","September","October","November","December",""],IsReadOnly:!1,NativeCalendarName:"Gregorian Calendar",AbbreviatedMonthGenitiveNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",""],MonthGenitiveNames:["January","February","March","April","May","June","July","August","September","October","November","December",""]},eras:[1,"A.D.",null,0]});window.SR=App.SR={localizedObjects:{},getCulture:function(){return SC.user!=null&&!String.isNullOrEmpty(SC.user.Location)?SC.user.Location:Setting.Language},getParentCulture:function(n){return String.isNullOrEmpty(n)?null:n.indexOf("-")<0?"":n.substr(0,n.indexOf("-"))},set:function(n,t,i){var r,u,f;for(i=i?i:SR.getCulture(),i.constructor===App.CultureInfo&&(i=i.name),r=this.localizedObjects[n],r===null&&(r=this.localizedObjects[n]=[]),u=0;u<r.length;u++)if(f=r[u],String.equals(f[0],i,!0)){f[1]=t;return}r[r.length]=[i,t]},get:function(keyOrValues,culture,tryParents){var v,member,i,item;if(culture=culture==null?SR.getCulture():culture,culture.constructor===App.CultureInfo&&(culture=culture.name),tryParents=tryParents==null?!0:tryParents,keyOrValues.constructor===String)return v=this.localizedObjects[keyOrValues],v==null?null:this.get(v,culture,tryParents);if(keyOrValues.Invariant){if(culture.length===0)return keyOrValues.Invariant;if(member=eval("keyOrValues."+culture.replace("-","_")),member)return member}else for(i=0;i<keyOrValues.length;i++)if(item=keyOrValues[i],String.equals(item[0],culture,!0))return item[1];return!tryParents||culture.length===0?null:SR.get(keyOrValues,SR.getParentCulture(culture),tryParents)},load:function(n){n.constructor!==String||n.startsWith("{")||(n=SC.get(n));var t=n.constructor===String?Json.toJsonObject(n):n;for(key in t)this.localizedObjects[key]=t[key]},_data:{About:[["","About"],["zh-CN","关于"]],Add:[["","Add"],["zh-CN","增加"]],Cancel:[["","Cancel"],["zh-CN","取消"]],CancelConfirm:[["","You sure you want to cancel the selected item?"],["zh-CN","确定要取消您选中的项目？"]],CancelEditConfirm:[["","Cancel"],["zh-CN","确认放弃更改？"]],ChangePassword:[["","Change Password"],["zh-CN","修改密码"]],Close:[["","Close"],["zh-CN","关闭"]],Code:[["","Code"],["zh-CN","编码"]],Copy:[["","Copy"],["zh-CN","拷贝"]],CopyNew:[["","Copy New"],["zh-CN","拷贝新增"]],Confirm:[["","Confirm"],["zh-CN","确认"]],Delete:[["","Delete"],["zh-CN","删除"]],DeleteConfirm:[["","You sure you want to delete the selected item?"],["zh-CN","确定要删除您选中的项目？"]],Description:[["","Description"],["zh-CN","描述"]],Desktop:[["","Desktop"],["zh-CN","桌面"]],Edit:[["","Edit"],["zh-CN","修改"]],Export:[["","Export"],["zh-CN","导出"]],False:[["","False"],["zh-CN","否"]],Import:[["","Import"],["zh-CN","导入"]],Loading:[["","Loading..."],["zh-CN","正在载入..."]],Name:[["","Name"],["zh-CN","名称"]],New:[["","New"],["zh-CN","新增"]],No:[["","No"],["zh-CN","否"]],NonOperationalStaff:[["","'{0}' non-operational staff."],["zh-CN","'{0}' 非业务操作人员。"]],OK:[["","OK"],["zh-CN","确定"]],Paste:[["","Paste"],["zh-CN","粘贴"]],Password:[["","Password"],["zh-CN","密码"]],Permission:[["","Permission"],["zh-CN","权限"]],PropertyPathCaptionSeperator:[[""," "],["zh-CN",""]],Refresh:[["","Refresh"],["zh-CN","刷新"]],Remove:[["","Remove"],["zh-CN","移除"]],Save:[["","Save"],["zh-CN","保存"]],Search:[["","Search"],["zh-CN","查询"]],SignIn:[["","Sign In"],["zh-CN","登录"]],SignOut:[["","Sign Out"],["zh-CN","退出"]],SuccessfullyChanged:[["","Successfully changed"],["zh-CN","成功修改。"]],TrueKey:[["","True"],["zh-CN","是"]],Yes:[["","Yes"],["zh-CN","是"]],FieldIsRequired:[["","The '{0}' field is required."],["zh-CN","'{0}' 不能为空。"]],IsNotValidValue:[["","'{0}' is not a valid value."],["zh-CN","'{0}' 为无效值。"]],MaximumLength:[["","The maximum length is '{0}'."],["zh-CN","最大长度为 '{0}'。"]],StringFormatBraceMismatch:[["","The format string contains an unmatched opening or closing brace."]],StringFormatInvalid:[["","The format string is invalid."],["zh-CN","非法字符串格式。"]],FormatInvalidString:[["","Input string was not in a correct format."]],BadFormatSpecifier:[["","Format specifier was invalid."]],IllegalDataReturned:[["","Illegal data returned."],["zh-CN","返回不合法的数据。"]],PageTimeoutOrNotSignIn:[["","Page timeout or is not sign in, please sign in again."],["zh-CN","页面超时或未登录，请重新登录。"]]}};SR.load(SR._data);App.Data={};window.DataType=App.Data.DataType=function(n,t){this.Namespace=null;this.Name=null;this.IsEnum=!1;this.Fields=[];this.Properties=[];this.ServerSideValidate=!1;this._init(n,t);this.FullName=this.Namespace+"."+this.Name;this.__inited=!1};DataType.prototype={toString:function(){return this.FullName},toJsonString:function(){return Json.toJsonString(this.toString())},getDisplayName:function(){var n=SR.get(this.Caption);return String.isNullOrEmpty(n)?this.Name:n},getCaption:function(){return SR.get(this.Caption)},isDomainResource:function(){return this.ensureInfoCompleted(),!Object.isUndefined(this.Properties)&&this.Properties.length>6&&this.Properties[6].Name==="Directory"},getField:function(n){return this.ensureInfoCompleted(),this.Fields.first(function(t){return t.Name===n})},getProperty:function(n){return this.ensureInfoCompleted(),this.Properties.first(function(t){return t.Name===n})},getRuntimeType:function(){return using(this.Namespace)[this.Name]},getEnumDisplayName:function(n){var i="",r,t;for(n=isNaN(n)?this.parseEnum(n):parseInt(n,10),r=0;r<this.Fields.length;r++)if(t=this.Fields[r],this.EnumFlags)(t.Value&n)!=0&&(i.length>0&&(i+=", "),i+=t.getDisplayName());else if(t.Value==n)return t.getDisplayName();return i},parseEnum:function(n){for(var i,t=0;t<this.Fields.length;t++)if(i=this.Fields[t],i.Name===n||i.getCaption()==n)return i.Value;return 0},ensureInfoCompleted:function(){if(!this.__inited){var n=SC.invoke("App.Services.ResourceService","GetDataType",this.FullName);this._init(n[0],n[1]);this.__inited=!0}},_init:function(n,t){var r,i;if(n!=null)for(r in n)if(r==="Fields")for(this.Fields=[],i=0;i<n[r].length;i++)this.Fields[i]=new App.Data.DataField(n[r][i]);else if(r==="Properties")for(this.Properties=[],i=0;i<n[r].length;i++)this.Properties[i]=new App.Data.DataProperty(n[r][i]);else this[r]=n[r];t===!0&&(this.ServerSideValidate=!0)},constructor:DataType};DataType.getType=function(n){var r,t,i;return n.constructor===DataType?n:n.getDataType?n.getDataType():DataType.isValidTypeName(n)?(r=window,t=n.split("."),t.length>1&&(r=using(t.slice(0,-1).join("."))),i=r[t[t.length-1]],i!=null&&i.getDataType!=null?i.getDataType():null):null};DataType.getRuntimeType=function(n){var t=DataType.getType(n);return t==null?null:t.getRuntimeType()};DataType.registerNamespace=function(n){var t,u,i,f,r;if(!DataType.isValidTypeName(n))return null;for(t=window,u=n.split("."),i=0;i<u.length;i++)f=u[i],r=t[f],r||(r=t[f]={}),t=r};DataType.isValidTypeName=function(n){return n.indexOf("<")<0&&n.indexOf("[")<0&&n.indexOf(":")<0};App.Data.DataField=function(n){for(var t in n)this[t]=n[t]};App.Data.DataField.prototype={getDisplayName:function(){var n=SR.get(this.Caption);return String.isNullOrEmpty(n)?this.Name:n},getCaption:function(){return SR.get(this.Caption)},constructor:App.Data.DataField};App.Data.DataProperty=function(n){for(var t in n)this[t]=n[t]};App.Data.DataProperty.prototype={getDisplayName:function(){var n=SR.get(this.Caption);return String.isNullOrEmpty(n)?this.Name:n},getCaption:function(){return SR.get(this.Caption)},getDefaultValue:function(){switch(this.Type){case"bool":return this.Default==null?null:Boolean.parse(this.Default);case"datetime":return this.Default==null?null:this.Default.endsWith("Now")?new Date:this.Default.ends("Today")?Date.today():Date.New(parseFloat(this.Default));case"short":case"int":return this.Default==null?null:parseInt(this.Default,10);case"decimal":case"double":case"long":case"float":case"timespan":return this.Default==null?null:parseFloat(this.Default);case"key":case"string":return this.Default==null?null:this.Default;default:var n=DataType.getType(this.Type);if(n!=null)return n.IsEnum===!0&&this.Default!=null?this._parseEnumDefault(n,this.Default):{}}return null},_parseEnumDefault:function(n,t){return t.indexOf(".")>0&&(t=t.substr(t.lastIndexOf(".")+1)),n.parseEnum(t)},constructor:App.Data.DataProperty};App.Data.PropertyPath=function(n,t){this.type=DataType.getType(n);this.path=t;this.property=this.type.getProperty(t.indexOf(".")>0?t.substr(t.lastIndexOf(".")+1):t)};App.Data.PropertyPath.prototype={getParent:function(){return this.path.indexOf(".")>0?new App.Data.PropertyPath(this.type,this.path.substr(0,this.path.indexOf("."))):null},getDisplayName:function(){var n=this.getParent();return(n==null?"":n.getDisplayName())+SR.get("PropertyPathCaptionSeperator")+this.property.getDisplayName()},toString:function(){return this.path},constructor:App.Data.PropertyPath};App.Data.DataObject=function(){};App.Data.DataObject.prototype={getDataType:function(){return this.constructor.__type?(this.constructor.__type.ensureInfoCompleted(),this.constructor.__type):null},getValue:function(n){return this[n]},setValue:function(n,t){var i=this[n];i!==t&&this.propertyChanged!==null&&this.propertyChanged(n,i,t);this[n]=t},clone:function(){var t=new this.constructor;for(var n in this)typeof this[n]!="function"&&(t[n]=this[n]);return t},validate:function(n,t,i){var u,o,e,f,r;if(arguments.length===0?n=new App.Data.ValidationContext:arguments[0].constructor!==App.Data.ValidationContext&&(i=t,t=n,n=new App.Data.ValidationContext),u=this.getDataType(),t==null)for(o=u.Properties.length,e=0;e<o;e++)f=u.Properties[e],this.validate(n,new App.Data.PropertyPath(u,f.Name),Object.isUndefined(this[f.Name])?f.getDefaultValue():this[f.Name]);else{if(t=t.constructor===App.Data.PropertyPath?t:new App.Data.PropertyPath(u,t),r=t.property,r.AllowNull==!1&&r.PropertyIndex>(u.isDomainResource()?6:5)&&((i==null||(typeof i=="object"||App.Data.DataObject.isResource(i))&&String.isNullOrEmpty(i.Key))&&n.addError(t,String.format(SR.get("FieldIsRequired"),t.getDisplayName())),r.Type==="string"&&i==""&&n.addError(t,String.format(SR.get("FieldIsRequired"),t.getDisplayName()))),i!=null&&r.Type!=="string"&&i.constructor===String)switch(r.Type){case"bool":Boolean.parse(i)==null&&n.addError(t,String.format(SR.get("IsNotValidValue"),i));break;case"datetime":Date.parseLocale(i)==null&&n.addError(t,String.format(SR.get("IsNotValidValue"),i));break;case"short":Number.parseInt16(i)==null&&n.addError(t,String.format(SR.get("IsNotValidValue"),i));break;case"int":Number.parseInt32(i)==null&&n.addError(t,String.format(SR.get("IsNotValidValue"),i));break;case"long":Number.parseInt64(i)==null&&n.addError(t,String.format(SR.get("IsNotValidValue"),i));break;case"float":Number.parseFloat(i)==null&&n.addError(t,String.format(SR.get("IsNotValidValue"),i));break;case"double":Number.parseDouble(i)==null&&n.addError(t,String.format(SR.get("IsNotValidValue"),i));break;case"decimal":Number.parseDecimal(i)==null&&n.addError(t,String.format(SR.get("IsNotValidValue"),i))}i!=null&&r.Type==="string"&&!Object.isUndefined(r.Length)&&r.Length>0&&i.length>r.Length&&n.addError(t,String.format(SR.get("MaximumLength"),r.Length))}return n},getBase:function(){return App.Data.DataObject.prototype},_init:function(n){if(typeof n=="object")for(var t in n)this[t]=n[t]},constructor:App.Data.DataObject};App.Data.DataObject.isResource=function(n){return n!=null&&n.constructor.__type!=null&&n.constructor.__type.constructor==App.Data.DataType};App.Data.ValidationError=function(n,t){this.path=arguments.length===2?n:null;this.message=arguments.length===1?n:t};App.Data.ValidationContext=function(){this.errors=[]};App.Data.ValidationContext.prototype={isValid:function(){return Array.isNullOrEmpty(this.errors)},isInvalid:function(){return!this.isValid()},getErrorMessage:function(){return this.errors.select(function(n){return n.message}).join(NewLine)},addError:function(){arguments.length===1&&arguments[0]!=null&&(this.errors[this.errors.length]=arguments[0].constructor===App.Data.ValidationError?arguments[0]:new App.Data.ValidationError(arguments[0]));arguments.length===2&&(this.errors[this.errors.length]=new App.Data.ValidationError(arguments[0],arguments[1]))},raiseExceptionIfNecessary:function(){if(this.isInvalid())throw Error.New(this.getErrorMessage());},constructor:App.Data.ValidationContext};window.Query=App.Data.Query=function(n,t){this.from=n;this.whereExpression=t;this.spanItems=null;this.grouping=null;this.havingExpression=null;this.orderByItems=null;this.selection=null;this.isDistinct=!1;this.selectRange={offset:0,count:0};this.rightsValue=1;this.optionsValue=null};Query.prototype={where:function(n){return this.whereExpression=n,this},whereAnd:function(n){return this.whereExpression=String.isNullOrEmpty(this.whereExpression)?n:"("+this.whereExpression+") && ("+n+")",this},whereOr:function(n){return this.whereExpression=String.isNullOrEmpty(this.whereExpression)?n:"("+this.whereExpression+") || ("+n+")",this},span:function(n){return this.spanItems=n,this},orderBy:function(n){return this.orderByItems=n,this},groupBy:function(n){return this.grouping=n,this},having:function(n){return this.havingExpression=n,this},select:function(n){return this.selection=n,this},distinct:function(){return this.isDistinct=!0,this},paging:function(n){return n==null&&(n=!0),n?this.range(Query.DefaultPageSize):this.range(0),this},isPaging:function(){return this.selectRange!=null&&this.selectRange.count>0},pageSize:function(n){return Object.isUndefined(n)?this.selectRange.count:(this.selectRange.count=n,this)},pageIndex:function(n){return Object.isUndefined(n)?this.isPaging()?parseInt(this.selectRange.offset/this.selectRange.count):-1:(this.isPaging()&&(this.selectRange.offset=this.selectRange.count*(n<0?0:n)),this)},range:function(n,t){return arguments.length===1&&(this.selectRange.count=n),arguments.length===2&&(this.selectRange={offset:n,count:t}),this},nextPage:function(){return this.isPaging()&&(this.selectRange.offset+=this.selectRange.count),this},rights:function(n){return this.rightsValue=n,this},options:function(n){return this.optionsValue=n,this},dataSource:function(n){return this.dataSourceValue=n,this},getSourceType:function(){return this.from==null?null:this.from.constructor==Query?this.from.getSourceType():this.from.GetDataType?this.from.GetDataType():DataType.getType(this.from.toString())},toString:function(n){var t="from ";return t+=this.from.constructor==Query?"("+this.from.toString(n)+")":this.from.toString(),t+=String.isNullOrEmpty(this.whereExpression)?"":" where "+this.whereExpression,t+=String.isNullOrEmpty(this.grouping)?"":" group by "+this.grouping,t+=String.isNullOrEmpty(this.havingExpression)?"":" having "+this.havingExpression,t+=String.isNullOrEmpty(this.orderByItems)?"":" order by "+this.orderByItems,String.isNullOrEmpty(this.spanItems)?String.isNullOrEmpty(this.selection)||(t+=" select "+this.selection):t+=" span "+this.spanItems,t+=this.isDistinct===!0?" distinct":"",t+=this.isPaging()?" range "+this.selectRange.offset+", "+this.selectRange.count:"",t+=this.rightsValue!=1?" rights "+this.rightsValue:"",String.isNullOrEmpty(this.optionsValue)||(t+=" options "+this.optionsValue),String.isNullOrEmpty(this.dataSourceValue)||(t+=" in "+this.dataSourceValue),t},toJsonString:function(n,t){return Json.toJsonString(this.toString(t))},constructor:Query};Query.DefaultPageSize=24;Query.buildQuery=function(n){var t,i=Query._containsCallback(n)?n.length-1:n.length;return i===1&&(t=n[0]==null?null:n[0].constructor===Query?n[0]:n[0].constructor===String&&n[0].indexOf("from ")>=0?n[0]:new Query(n[0])),i===2&&(t=new Query(n[0]).where(n[1])),i===3&&(t=new Query(n[0]).where(n[1]).span(n[2])),i===4&&(t=new Query(n[0]).where(n[1]).span(n[2]).orderBy(n[3])),t};Query.buildDataQuery=function(n){var t,i=Query._containsCallback(n)?n.length-1:n.length;return i===1&&(t=n[0]==null?null:n[0].constructor===Query?n[0]:n[0].constructor===String&&n[0].indexOf("from ")>=0?n[0]:new Query(n[0])),i===2&&(t=new Query(n[0]).select(n[1])),i===3&&(t=new Query(n[0]).select(n[1]).where(n[2])),i===4&&(t=new Query(n[0]).select(n[1]).where(n[2]).orderBy(n[3])),t};Query.Const=function(n,t){if(n==null)return"null";t==null&&(t=!0);switch(n.constructor){case Array:return n.select(function(n){return Query.Const(n,t)}).join(", ");case Date:return n.getUTCTicks().toString();case String:return t===!0&&(n=n.trim()),"'"+n.replace(/'/g,"''")+"'";default:return n.toString()}};Query._containsCallback=function(n){return n.length>0&&typeof n[n.length-1]=="function"&&!n[n.length-1].__type};window.InsertQuery=App.Data.InsertQuery=function(n){this.type=n};InsertQuery.prototype={assign:function(n){return this.assignments=n,this},from:function(n){return this.fromQuery=Query.buildDataQuery(n),this},dataSource:function(n){return this.dataSourceValue=n,this},toString:function(){return"insert "+this.type.toString()+(String.isNullOrEmpty(this.assignments)?"":"{"+this.assignments+"}")+(String.isNullOrEmpty(this.fromQuery)?"":Query.buildDataQuery(this.fromQuery).toString())+(String.isNullOrEmpty(this.dataSourceValue)?"":" in "+this.dataSourceValue)},toJsonString:function(n,t){return Json.toJsonString(this.toString(t))},constructor:InsertQuery};InsertQuery.buildQuery=function(n){var t,i=Query._containsCallback(n)?n.length-1:n.length;return i===1&&(t=n[0]==null?null:n[0].constructor===InsertQuery?n[0]:n[0].constructor===String&&n[0].indexOf("insert ")>=0?n[0]:new InsertQuery(n[0])),i===2&&(t=n[1]!=null&&n[1].inddexOf("from ")>=0?new InsertQuery(n[0]).from(n[1]):new InsertQuery(n[0]).assign(n[1])),t};window.UpdateQuery=App.Data.UpdateQuery=function(n,t,i){this.type=n;this.assignments=t;this.whereExpression=i};UpdateQuery.prototype={assign:function(n){return this.assignments=n,this},where:function(n){return this.whereExpression=n,this},whereAnd:function(n){return this.whereExpression=String.isNullOrEmpty(this.whereExpression)?n:"("+this.whereExpression+") && ("+n+")",this},whereOr:function(n){return this.whereExpression=String.isNullOrEmpty(this.whereExpression)?n:"("+this.whereExpression+") || ("+n+")",this},dataSource:function(n){return this.dataSourceValue=n,this},toString:function(){return"update "+this.type.toString()+" {"+this.assignments+"}"+(String.isNullOrEmpty(this.whereExpression)?"":" where "+this.whereExpression)+(String.isNullOrEmpty(this.dataSourceValue)?"":" in "+this.dataSourceValue)},toJsonString:function(n,t){return Json.toJsonString(this.toString(t))},constructor:UpdateQuery};UpdateQuery.buildQuery=function(n){var t,i=Query._containsCallback(n)?n.length-1:n.length;return i===1&&(t=n[0]==null?null:n[0].constructor===UpdateQuery?n[0]:n[0].constructor===String&&n[0].indexOf("update ")>=0?n[0]:new UpdateQuery(n[0])),i===2&&(t=new UpdateQuery(n[0]).assign(n[1])),i===3&&(t=new UpdateQuery(n[0]).assign(n[1]).where(n[2])),t};window.DeleteQuery=App.Data.DeleteQuery=function(n,t){this.type=n;this.whereExpression=t};DeleteQuery.prototype={where:function(n){return this.whereExpression=n,this},whereAnd:function(n){return this.whereExpression=String.isNullOrEmpty(this.whereExpression)?n:"("+this.whereExpression+") && ("+n+")",this},whereOr:function(n){return this.whereExpression=String.isNullOrEmpty(this.whereExpression)?n:"("+this.whereExpression+") || ("+n+")",this},dataSource:function(n){return this.dataSourceValue=n,this},toString:function(){return"delete "+this.type.toString()+(String.isNullOrEmpty(this.whereExpression)?"":" where "+this.whereExpression)+(String.isNullOrEmpty(this.dataSourceValue)?"":" in "+this.dataSourceValue)},toJsonString:function(n,t){return Json.toJsonString(this.toString(t))},constructor:DeleteQuery};DeleteQuery.buildQuery=function(n){var t,i=Query._containsCallback(n)?n.length-1:n.length;return i===1&&(t=n[0]==null?null:n[0].constructor===DeleteQuery?n[0]:n[0].constructor===String&&n[0].indexOf("delete ")>=0?n[0]:new DeleteQuery(n[0])),i===2&&(t=new DeleteQuery(n[0]).where(n[1])),t};App.Services={};App.Services.ServiceClient=function(){this.throwOnError=!1;this._callback=null;this._xhr=null};App.Services.ServiceClient.prototype={invoke:function(){var r=Json.toJsonString(App.Services.ServiceClient.getMessage.apply(null,arguments)),i=new XMLHttpRequest,t,n;i.open("post",App.Services.ServiceClient.getServiceUrl()+"?rnd="+Math.random(),!1);i.setRequestHeader("Content-Type","text/plain;charset=utf8");i.send(r);t=i.responseText;try{n=Json.toJsonObject(t)}catch(u){throw Error.New(SR.get("IllegalDataReturned"),t,Error.errorNumbers.server);}if(n!=null&&n.StackTrace){if(n.ErrorCode===Error.errorNumbers.unconnected){SC.closeCompleted();SC.restore();throw Error.New(SR.get("PageTimeoutOrNotSignIn"),null,Error.errorNumbers.unconnected);}else if(n.ErrorCode===Error.errorNumbers.message)throw Error.New(null,t,Error.errorNumbers.message);if(n.ErrorCode===Error.errorNumbers.unauthorized)throw Error.New(null,t,Error.errorNumbers.unauthorized);else throw Error.New(null,t,Error.errorNumbers.service);}return n},invokeAsync:function(){arguments[2]!==null&&typeof arguments[2]=="function"&&(this._callback=arguments[2]);var t=Json.toJsonString(App.Services.ServiceClient.getMessage.apply(null,arguments)),n=this;this._xhr=new XMLHttpRequest;this._xhr.open("post",App.Services.ServiceClient.getServiceUrl()+"?rnd="+Math.random(),!0);this._xhr.onreadystatechange=function(){var t,i,r;if(n._xhr.readyState===4){t=null;i=null;try{if(Object.isUndefined(n._xhr.status))return}catch(u){t=u}if(t===null){r=n._xhr.responseText;try{i=Json.toJsonObject(r)}catch(t){t=Error.New(SR.get("IllegalDataReturned"),r,Error.errorNumbers.server)}i!=null&&i.StackTrace&&(i.ErrorCode===Error.errorNumbers.unconnected?(SC.closeCompleted(),SC.restore(),t=Error.New(SR.get("PageTimeoutOrNotSignIn"),null,Error.errorNumbers.unconnected)):i.ErrorCode===Error.errorNumbers.message&&(t=Error.New(null,r,Error.errorNumbers.message)),t=i.ErrorCode===Error.errorNumbers.unauthorized?Error.New(null,r,Error.errorNumbers.unauthorized):Error.New(null,r,Error.errorNumbers.service))}if(n._callback!=null&&n._callback({result:i,error:t,hasError:t!==null,cancelled:!1,success:t===null,ensureSuccess:function(){if(this.error!==null)throw this.error;return!this.cancelled}}),n.throwOnError&&t!==null)throw t;n._xhr.onreadystatechange=null;n._xhr=null}};this._xhr.setRequestHeader("Content-Type","text/json;charset=utf8");this._xhr.send(t)},abort:function(){this._xhr!=null&&(this._xhr.abort(),this._xhr=null,this._callback!=null&&this._callback({result:null,error:null,hasError:!1,cancelled:!0,success:!1,ensureSuccess:function(){if(this.error!==null)throw this.error;return!this.cancelled}}))},constructor:App.Services.ServiceClient};App.Services.ServiceClient.getServiceUrl=function(n,t){if(n!=null&&t!=null){var r=arguments,i=null;return arguments.length>2&&(i=[],Array.copy(arguments,2,i),i!=null&&i.length===1&&(i=i[0])),window.Setting.ServerUrl+VirtualPath+"service.ashx/"+n+"/"+t+(i==null?"":"?"+escape(Json.toJsonString(i)))}return window.Setting.ServerUrl+VirtualPath+"service.ashx"};App.Services.ServiceClient.getMessage=function(n,t){var i=arguments,f,r,u;return n=i[0],t=i[1],f=i.length>2&&i[2]!==null&&typeof i[2]=="function"&&!i[2].__type?!0:!1,r=[],i.length>2&&Array.copy(i,f?3:2,r),u={Service:n,Method:t},r.length===1?u.Parameters=r[0]:r.length>1&&(u.Parameters=r),String.isNullOrEmpty(SC.sessionID)||(u.SessionID=SC.sessionID),u};window.SC=App.Services.SC={sessionID:null,user:null,connect:function(){var n=SC.invoke("App.Services.SystemService","Connect");return SC.connectCompleted(n[0],n[1]),n},connectCompleted:function(n,t){SC.sessionID=n;SC.user=t;setCookie("App_SessionID",SC.sessionID);App.CultureInfo.CurrentCulture=App.CultureInfo.getCulture(SR.getCulture());SC._syncWindowState()},close:function(){try{SC.invoke("App.Services.SystemService","Close")}catch(n){}SC.closeCompleted()},closeCompleted:function(){SC.sessionID=null;SC.user=null;deleteCookie("App_SessionID");App.CultureInfo.CurrentCulture=App.CultureInfo.getCulture(SR.getCulture());SC._syncWindowState()},isAlive:function(n){if(n=n?n:!0,!String.isNullOrEmpty(getCookie("App_SessionID"))){if(n)try{SC.invoke("App.Services.SystemService","CurrentUser")}catch(t){return!1}return!0}return!1},restore:function(n){if(SC.sessionID=getCookie("App_SessionID"),n=Object.isUndefined(n)?!1:n,n&&!String.isNullOrEmpty(SC.sessionID))return!0;var t=SC.invoke("App.Services.SystemService","Connect"),i=SC.sessionID!==t[0];return SC.connectCompleted(t[0],t[1]),!i},signIn:function(n,t,i,r){var u=SC.invoke("App.Services.SystemService","SignIn",n,t,i,r);return(u[0]==0||u[0]==1)&&SC.connectCompleted(u[1],u[2]),u},signOut:function(){try{SC.invoke("App.Services.SystemService","SignOut")}catch(n){}SC.signOutCompleted()},signOutCompleted:function(){SC.user=null;App.CultureInfo.CurrentCulture=App.CultureInfo.getCulture(SR.getCulture());SC._syncWindowState()},now:function(){if(SC._useLocalDate)return new Date;var n=Date.New(SC.invoke("App.Services.SystemService","Now"));SC._useLocalDate=Math.abs(n.getTime()-(new Date).getTime())<1e4},today:function(){return SC._useLocalDate?Date.today():Date.New(SC.invoke("App.Services.SystemService","Today"))},execute:function(n){return SC.invoke("App.Services.ResourceService","Execute",n)},executeAsync:function(n,t){return SC.invokeAsync("App.Services.ResourceService","Execute",t,n)},select:function(){var i=Query.buildQuery(arguments),n=SC.invoke("App.Services.ResourceService","Select",i),r,u,t;if(i.getSourceType&&(r=i.getSourceType(),r!=null&&n!=null)){for(u=[],t=0;t<n.Items.length;t++)u[t]=new(r.getRuntimeType())(n.Items[t]);n.Items=u}return n},selectAsync:function(){var n=Query.buildQuery(arguments),t=arguments;SC.invokeAsync("App.Services.ResourceService","Select",function(i){var u,f,r;if(i.success&&n.getSourceType&&(u=n.getSourceType(),u!=null&&i.result!=null&&i.result.Items)){for(f=[],r=0;r<i.result.Items.length;r++)f[r]=new(u.getRuntimeType())(i.result.Items[r]);i.result.Items=f}SC._getCallback(t)(i)},n)},selectOne:function(){var t=Query.buildQuery(arguments),n=SC.invoke("App.Services.ResourceService","SelectOne",t),i;return t.getSourceType&&(i=t.getSourceType(),n!=null&&i!=null&&(n=new(i.getRuntimeType())(n))),n},selectOneAsync:function(){var n=Query.buildQuery(arguments),t=arguments;SC.invokeAsync("App.Services.ResourceService","SelectOne",function(i){if(i.success&&n.getSourceType){var r=n.getSourceType();i.result!=null&&r!=null&&(i.result=new(r.getRuntimeType())(i.result))}SC._getCallback(t)(i)},n)},selectScalar:function(){return SC.invoke("App.Services.ResourceService","SelectScalar",Query.buildDataQuery(arguments))},selectScalarAsync:function(){SC.invokeAsync("App.Services.ResourceService","SelectScalar",SC._getCallback(arguments),Query.buildDataQuery(arguments))},selectData:function(){return SC.invoke("App.Services.ResourceService","SelectData",Query.buildDataQuery(arguments))},selectDataAsync:function(){SC.invokeAsync("App.Services.ResourceService","SelectData",SC._getCallback(arguments),Query.buildDataQuery(arguments))},selectByKey:function(n,t){var r=new Query(n).where("Key == "+Query.Const(t)),i=SC.invoke("App.Services.ResourceService","SelectOne",r);return i!=null&&(i=new(r.getSourceType().getRuntimeType())(i)),i},selectByKeyAsync:function(n,t){var r=arguments,i=new Query(n).where("Key == "+Query.Const(t));SC.invokeAsync("App.Services.ResourceService","SelectOne",function(n){n.success&&n.result!=null&&(n.result=new(i.getSourceType().getRuntimeType())(n.result));SC._getCallback(r)(n)},i)},exists:function(n,t){return SC.selectOne(n,t)!==null},validate:function(n,t,i){var r=SC.invoke("App.Services.ResourceService","Validate",Json.definiteType(n,n.getDataType()),t,t==null?null:Json.definiteType(i));return r.length>0?r.select(function(n){return new App.Data.ValidationError(new App.Data.PropertyPath(n.PropertyRootType,n.PropertyPath),n.Message)}):r},validateAsync:function(n,t,i,r){r=arguments.length==2?t:r;var u=SC.invokeAsync("App.Services.ResourceService","Validate",function(n){if(r==null){n.ensureSuccess();return}var t=n.result.length>0?n.result.select(function(n){new App.Data.ValidationError(new App.Data.PropertyPath(n.PropertyRootType,n.PropertyPath),n.Message)}):n.result;n.result=t;r(n)},Json.definiteType(n,n.getDataType()),path!=null&&path.constructor===String?path:null,path!=null&&path.constructor===String?Json.definiteType(i):null)},insert:function(n){var t,i;if(n.getDataType){if(t=SC.invoke("App.Services.ResourceService","Insert",Json.definiteType(n,n.getDataType())),t)for(i in t)n[i]=t[i];return n}return SC.invoke("App.Services.ResourceService","DirectInsert",UpdateQuery.buildQuery(arguments))},insertAsync:function(n){if(n.getDataType){var t=arguments;SC.invokeAsync("App.Services.ResourceService","Insert",function(i){if(i.success&&i.result!=null){for(var r in i.result)n[r]=i.result[r];i.result=n}SC._getCallback(t)(i)},Json.definiteType(n,n.getDataType()))}else SC.invoke("App.Services.ResourceService","DirectInsert",SC._getCallback(arguments),InsertQuery.buildQuery(arguments))},update:function(){var t,n,i;if(arguments.length==1&&App.Data.DataObject.isResource(arguments[0])){if(t=arguments[0],n=SC.invoke("App.Services.ResourceService","UpdateResource",Json.definiteType(t,t.getDataType())),n)for(i in n[1])t[i]=n[1][i];return n[0]}return SC.invoke("App.Services.ResourceService","Update",UpdateQuery.buildQuery(arguments))},updateAsync:function(){if(arguments.length==1&&App.Data.DataObject.isResource(arguments[0])){var t=arguments,n=t[0];SC.invokeAsync("App.Services.ResourceService","UpdateResource",function(i){if(i.success&&i.result!=null){for(var r in i.result)n[r]=i.result[r];i.result=n}SC._getCallback(t)(i)},Json.definiteType(n,n.getDataType()))}SC.invokeAsync("App.Services.ResourceService","Update",SC._getCallback(arguments),UpdateQuery.buildQuery(arguments))},directUpdate:function(){return SC.invoke("App.Services.ResourceService","DirectUpdate",UpdateQuery.buildQuery(arguments))},directUpdateAsync:function(){SC.invoke("App.Services.ResourceService","DirectUpdate",SC._getCallback(arguments),UpdateQuery.buildQuery(arguments))},Delete:function(){if(arguments.length==1&&App.Data.DataObject.isResource(arguments[0]))SC.invoke("App.Services.ResourceService","DeleteResource",arguments[0].getDataType(),arguments[0].Key);else if(arguments.length==2&&arguments[1].constructor===Array)SC.invoke("App.Services.ResourceService","DeleteResources",arguments[0],arguments[1]);else return SC.invoke("App.Services.ResourceService","Delete",DeleteQuery.buildQuery(arguments))},deleteAsync:function(){arguments.length==1&&App.Data.DataObject.isResource(arguments[0])?SC.invokeAsync("App.Services.ResourceService","DeleteResource",SC._getCallback(arguments),arguments[0].getDataType(),arguments[0].Key):arguments.length==2&&arguments[1].constructor===Array?SC.invokeAsync("App.Services.ResourceService","DeleteResources",SC._getCallback(arguments),arguments[0],arguments[1]):SC.invokeAsync("App.Services.ResourceService","Delete",SC._getCallback(arguments),DeleteQuery.buildQuery(arguments))},deleteByKeys:function(n,t){SC.invoke("App.Services.ResourceService",t!=null&&t.constructor===Array?"DeleteResources":"DeleteResource",n,t)},deleteByKeysAsync:function(n,t){SC.invokeAsync("App.Services.ResourceService",t!=null&&t.constructor===Array?"DeleteResources":"DeleteResource",SC._getCallback(arguments),n,t)},directDelete:function(){return SC.invoke("App.Services.ResourceService","DirectDelete",DeleteQuery.buildQuery(arguments))},directDeleteAsync:function(){SC.invokeAsync("App.Services.ResourceService","DirectDelete",SC._getCallback(arguments),DeleteQuery.buildQuery(arguments))},invoke:function(){var n=new App.Services.ServiceClient;return n.invoke.apply(n,arguments)},invokeAsync:function(n,t,i){var r=new App.Services.ServiceClient;(Object.isUndefined(i)||i===Function.Empty)&&(r.throwOnError=!0);r.invokeAsync.apply(r,arguments)},get:function(){var i=arguments,n,t;return i.length===1?(n=i[0],n=(n.startsWith("http",!0)?"":n.startsWith("/")?VirtualPath.substr(0,VirtualPath.length-1):"")+n):n=SC.getServiceUrl.apply(SC,arguments),t=new XMLHttpRequest,t.open("get",n,!1),t.setRequestHeader("Content-Type","text/plain;charset=utf8"),t.send(),i.length>1?Json.toJsonObject(t.responseText):t.responseText},download:function(n,t,i,r){window.open("/download.ashx?p="+escape(n)+(t==null?"":"&f="+escape(t))+(i==null?"":"&t="+escape(i))+(r==null?"":"&v="+escape(r)))},getServiceUrl:function(){return App.Services.ServiceClient.getServiceUrl.apply(App.Services.ServiceClient,arguments)},getMessage:function(){return App.Services.ServiceClient.getMessage.apply(App.Services.ServiceClient,arguments)},_syncWindowState:function(){var i,t,n;if(parent==null||parent==window||Object.isUndefined(parent.SC)||Object.isUndefined(parent.App)||(parent.SC.sessionID=SC.sessionID,parent.SC.user=SC.user,parent.App.CultureInfo.CurrentCulture=parent.App.CultureInfo.getCulture(SR.getCulture())),Object.isUndefined(window.document.frames))for(i=document.getElementsByTagName("IFRAME"),t=0;t<i.length;t++)n=i[t].contentWindow,Object.isUndefined(n.SC)||Object.isUndefined(n.App)||(n.SC.sessionID=SC.sessionID,n.SC.user=SC.user,n.App.CultureInfo.CurrentCulture=parent.App.CultureInfo.getCulture(SR.getCulture()));else for(t=0;t<window.document.frames.length;t++)n=window.document.frames[t],Object.isUndefined(n.SC)||Object.isUndefined(n.App)||(n.SC.sessionID=SC.sessionID,n.SC.user=SC.user,n.App.CultureInfo.CurrentCulture=parent.App.CultureInfo.getCulture(SR.getCulture()))},_getCallback:function(n){return n.length>0&&typeof n[n.length-1]=="function"?n[n.length-1]:Function.Empty}};window.using=function(n,t){function v(n){for(var e,r,o,i=0;i<n.length;i++){var f=n[i],s=f[0].Name,t=u[s]=function(n){this._init(n)};if(t.__type=new App.Data.DataType(f[0],f[1]),t.__type.__inited=!0,t.getDataType=function(){return this.__type.ensureInfoCompleted(),this.__type},t.toString=function(){return this.__type.toString()},t.toJsonString=function(){return Json.toJsonString(this.toString())},t.__type.IsEnum)for(e=t.__type.Fields,r=0;r<e.length;r++)o=e[r],t[o.Name]=o.Value;else t.__type.IsDataObject&&(t.prototype=new App.Data.DataObject,t.prototype.constructor=t)}}var f,e,h,u,c,o,i,s;if(!DataType.isValidTypeName(n))return null;for(f=window,e=n.split("."),i=0;i<e.length;i++){if(h=e[i],u=f[h],!u&&(u=f[h]={},i===e.length-1))if(t==!0){for(c=SC.invoke("App.Services.ResourceService","GetDataTypeNamesByNamespace",n),o=[],i=0;i<c.length;i++){var a=c[i],l=a[0],r=u[l]=function(n){this._init(n)};r.__type=new App.Data.DataType({Namespace:n,Name:l});r.getDataType=function(){return this.__type.ensureInfoCompleted(),this.__type};r.toString=function(){return this.__type.toString()};r.toJsonString=function(){return Json.toJsonString(this.toString())};a[1]?o.add(l):(r.prototype=new App.Data.DataObject,r.prototype.constructor=r)}o.length>0&&(s=SC.invoke("App.Services.ResourceService","GetDataTypes",o),v(s))}else s=SC.invoke("App.Services.ResourceService","GetDataTypesByNamespace",n),v(s);f=u}return f};parent==null||parent==window||Object.isUndefined(parent.SC)||(SC.sessionID=parent.SC.sessionID,SC.user=parent.SC.user);